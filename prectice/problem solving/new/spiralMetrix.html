<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body></body>
</html>
<script>
  var input = [
    [1, 2, 3, 4],
    [5, 6, 7, 8],
    [9, 10, 11, 12],
    [13, 14, 15, 16],
  ];
  function run(input, result) {
    // add the first row to result
    result = result.concat(input.shift());
    console.log("res1", result); //[1, 2, 3, 4] //[1, 2, 3, 4, 8, 12, 16, 15, 14, 13, 9, 5, 6, 7]
    console.log("in1", input); //[[5, 6, 7, 8], [9, 10, 11, 12], [13, 14, 15, 16]] // [[10, 11]]

    // add the last element of each remaining row
    input.forEach(function (rightEnd) {
      result.push(rightEnd.pop());
    });
    console.log("res2", result); //[1, 2, 3, 4, 8, 12, 16] //[1, 2, 3, 4, 8, 12, 16, 15, 14, 13, 9, 5, 6, 7, 11]
    console.log("in2", input); //[[5, 6, 7], [9, 10, 11], [13, 14, 15]] // [[10]]

    // add the last row in reverse order
    result = result.concat(input.pop().reverse());
    console.log("res3", result); //[1, 2, 3, 4, 8, 12, 16, 15, 14, 13] //[1, 2, 3, 4, 8, 12, 16, 15, 14, 13, 9, 5, 6, 7, 11, 10]
    console.log("in3", input); //[[5, 6, 7], [9, 10, 11]]

    // add the first element in each remaining row (going upwards)
    var tmp = [];
    input.forEach(function (leftEnd) {
      tmp.push(leftEnd.shift());
    });
    console.log("res4", result); //[1, 2, 3, 4, 8, 12, 16, 15, 14, 13]
    console.log("in4", input); //[[6, 7], [10, 11]]

    result = result.concat(tmp.reverse());
    // console.log("temp", temp) //[9, 5]
    console.log("res5", result); //[1, 2, 3, 4, 8, 12, 16, 15, 14, 13, 9, 5]
    console.log("in5", input); //[[6, 7], [10, 11]]

    //again start the function
    return run(input, result);
  }
  console.log("result", run(input, [])); // [1,2,3,4,8,12,16,15,14,13,9,5,6,7,11,10]
</script>
